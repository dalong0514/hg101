<?php/** * Created by PhpStorm. * User: dingo * Date: 13/04/2019 * Time: 02:23 */namespace App\Models;use Illuminate\Database\Eloquent\Model;use Illuminate\Database\Eloquent\SoftDeletes;use Illuminate\Support\Facades\Route;use Qiniu\Http\Request;use function Qiniu\json_decode;class BannerModel extends Model{    use SoftDeletes;    protected $table = "tz_banner";    public $primaryKey = 'id';    protected $dates = ['deleted_at'];    public $timestamps = true;    // banner 状态    const SHOW = 1;  // 显示    const HIDDEN = 0;  // 不显示    public static $status = [0 => '显示', 1 => '不显示'];    // 跳转类型    public static $param_type = [1 => '设备', 2 => '案例'];    /**     * 修改时间是时间戳格式     */    public function fromDateTime($value){        return strtotime(parent::fromDateTime($value));    }    /**     * 读取图片处理     */    public function getImageAttribute($image)    {        $namespace = explode('\\', \request()->route()->getAction()['namespace']);        if(isset($namespace[1]) && $namespace[1] == 'Api'){            $image = env('QN_URL') . $image;        }        return $image;    }    /**     * 获取 Banner     * @param     * @return array     */    public static function getBanner(){        return self::query()            ->where(['status' => self::SHOW])            ->orderBy('id', 'desc')            ->select(['id', 'title', 'image', 'param_id', 'param_type'])            ->get();    }}